#! /bin/sh
set -e

# Execute a subsidiary command in the context of a given project.

case $1 in
	ubuntu)
		export PROJECT=ubuntu
		export CAPPROJECT=Ubuntu
		if [ "$UBUNTU_DEFAULTS_LOCALE" = zh_CN ]; then
			export CAPPROJECT='Ubuntu Chinese Edition'
		fi
		;;
	kubuntu)
		export PROJECT=kubuntu
		export CAPPROJECT=Kubuntu
		;;
	kubuntu-active)
		export PROJECT=kubuntu-active
		export CAPPROJECT=Kubuntu-Active
		;;
	edubuntu)
		export PROJECT=edubuntu
		export CAPPROJECT=Edubuntu
		;;
	xubuntu)
		export PROJECT=xubuntu
		export CAPPROJECT=Xubuntu
		;;
	gobuntu)
		export PROJECT=gobuntu
		export CAPPROJECT=Gobuntu
		;;
	ubuntu-server)
		export PROJECT=ubuntu-server
		export CAPPROJECT=Ubuntu-Server
		;;
	jeos)
		export PROJECT=jeos
		export CAPPROJECT=Ubuntu-JeOS
		;;
	ubuntu-mid)
		export PROJECT=ubuntu-mid
		export CAPPROJECT=Ubuntu-MID
		;;
	ubuntu-netbook)
		export PROJECT=ubuntu-netbook
		export CAPPROJECT=Ubuntu-Netbook
		;;
	ubuntu-headless)
		export PROJECT=ubuntu-headless
		export CAPPROJECT=Ubuntu-Headless
		;;
	ubuntustudio)
		export PROJECT=ubuntustudio
		export CAPPROJECT=Ubuntu-Studio
		;;
	mythbuntu)
		export PROJECT=mythbuntu
		export CAPPROJECT=Mythbuntu
		;;
	lubuntu)
		export PROJECT=lubuntu
		export CAPPROJECT=Lubuntu
		;;
	ubuntukylin)
		export PROJECT=ubuntukylin
		export CAPPROJECT=UbuntuKylin
		;;
	ubuntu-gnome)
		export PROJECT=ubuntu-gnome
		export CAPPROJECT=Ubuntu-GNOME
		;;
	ubuntu-moblin-remix)
		export PROJECT=ubuntu-moblin-remix
		export CAPPROJECT=Ubuntu-Moblin-Remix
		;;
	livecd-base)
		export PROJECT=livecd-base
		export CAPPROJECT=LiveCD-Base
		;;
	ubuntu-core)
		export PROJECT=ubuntu-core
		export CAPPROJECT=Ubuntu-Core
		;;
	tocd3)
		export PROJECT=tocd3
		export CAPPROJECT=TheOpenCDv3
		;;
	tocd3.1)
		export PROJECT=tocd3.1
		export CAPPROJECT=TheOpenCDv3.1
		;;
	*)
		cat <<EOF >&2
Usage: for-project PROJECT [COMMAND ARGS...]
Recognised projects:
  ubuntu
  kubuntu
  kubuntu-active
  edubuntu
  xubuntu
  gobuntu
  ubuntu-server
  jeos
  ubuntu-mid
  ubuntu-netbook
  ubuntu-headless
  ubuntustudio
  mythbuntu
  lubuntu
  ubuntukylin
  ubuntu-gnome
  ubuntu-moblin-remix
  livecd-base
  ubuntu-core
  tocd3
  tocd3.1
EOF
		exit 1
		;;
esac
shift

if [ $# -eq 0 ]; then
	exec "${SHELL:-/bin/sh}" -i
else
	exec "$@"
fi
